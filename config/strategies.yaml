# Configuration for MochiRAG models and strategies

# Vector Store Configuration
# Configure the vector store used by the application.
# `provider`: Currently only 'chromadb' is supported.
# `mode`: 'persistent' for local file-based storage, 'http' for client-server mode.
# `host`: The hostname of the ChromaDB server (only for 'http' mode).
# `port`: The port of the ChromaDB server (only for 'http' mode).
# `path`: The local directory to store database files (only for 'persistent' mode).
vector_store:
  provider: chromadb
  mode: http # 'persistent # Can be 'persistent' or 'http'
  host: localhost
  port: 8001  # Changed to 8001 to avoid conflict with backend uvicorn (8000)
  path: "chroma_db"

# Embedding models configuration
embeddings:
  # Default model for embedding text. Excellent performance for its size.
  all-MiniLM-L6-v2:
    provider: ollama # Indicates it's a SentenceTransformer model
    model_name: "mahonzhan/all-MiniLM-L6-v2:latest"
    base_url: "http://localhost:11434"

# Large Language Models (LLM) configuration
llms:
  # Default LLM for chat and other tasks. Using a small, fast Gemma model.
  gemma3:4b-it-qat:
    provider: ollama  
    model_name: "gemma3:4b-it-qat" # Using a standard name, as gemma3:4b-it-qat might be custom
    base_url: "http://localhost:11434"

  # --- OpenAI Configuration ---
  # Replace with your actual OpenAI model and API key
  gpt-4o:
    provider: openai
    model_name: "gpt-4o"
    api_key: "YOUR_OPENAI_API_KEY" # Replace with your key or set OPENAI_API_KEY environment variable
    temperature: 0.7

  # --- Azure OpenAI Configuration ---
  # Replace with your Azure deployment details
  azure-gpt-4:
    provider: azure
    deployment_name: "YOUR_DEPLOYMENT_NAME"
    azure_endpoint: "YOUR_AZURE_ENDPOINT" # e.g., https://your-resource.openai.azure.com/
    api_version: "2024-02-01"
    api_key: "YOUR_AZURE_API_KEY" # Replace with your key or set AZURE_OPENAI_API_KEY environment variable
    temperature: 0.7

  # --- Google Gemini Configuration ---
  # Replace with your Gemini model and API key
  gemini-1.5-pro:
    provider: gemini
    model_name: "gemini-1.5-pro-latest"
    api_key: "YOUR_GOOGLE_API_KEY" # Replace with your key or set GOOGLE_API_KEY environment variable
    temperature: 0.7

# Retriever strategies configuration
retrievers:
  # Configuration for the basic semantic search
  basic:
    strategy_class: "BasicRetrieverStrategy"
    description: "A standard vector similarity search."
    parameters:
      k: 5 # Number of documents to retrieve
  multiquery:
    strategy_class: "MultiQueryRetrieverStrategy"
    description: "Generates multiple queries from different perspectives for a given user question."
    parameters: {}
  compression:
    strategy_class: "ContextualCompressionRetrieverStrategy"
    description: "Compresses retrieved documents to extract only the relevant information."
    parameters: {}
  parent_document:
    strategy_class: "ParentDocumentRetrieverStrategy"
    description: "Retrieves smaller chunks of documents and returns the parent document."
    parameters:
      parent_chunk_size: 2000
      child_chunk_size: 400
  deeprag:
    strategy_class: "DeepRAGStrategy"
    description: "Decomposes complex questions into a series of simpler subqueries to build a comprehensive answer."
    parameters: {}