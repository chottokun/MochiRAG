# 開発者セットアップガイド

このガイドは、MochiRAGプロジェクトの開発環境をセットアップし、アプリケーションを実行するための手順を説明します。

## 1. 前提条件

開発を始める前に、以下のソフトウェアがインストールされていることを確認してください。

- **Python 3.10 以上**
- **Git**
- **Ollama（推奨）**: ローカルでLLMを動作させるために推奨されます。`llama3`などのモデルを事前にpullしておいてください。
  ```bash
  ollama pull llama3
  ```

## 2. インストール

リポジトリをクローンし、依存関係をインストールします。

### 2.1. 自動セットアップ（推奨）

開発用のセットアップスクリプトを使用すると、仮想環境の作成と依存関係のインストールが自動的に行われます。

```bash
# 1. リポジトリをクローン
git clone <リポジトリURL>
cd MochiRAG

# 2. スクリプトに実行権限を付与
chmod +x setup_dev.sh

# 3. スクリプトを実行
./setup_dev.sh

# 4. 作成された仮想環境を有効化
source venv/bin/activate
```

### 2.2. 手動セットアップ

手動でセットアップを行う場合は、以下の手順に従ってください。

```bash
# 1. 仮想環境を作成
python3 -m venv venv

# 2. 仮想環境を有効化
source venv/bin/activate

# 3. 依存関係をインストール（テスト用も含む）
pip install --upgrade pip
pip install ".[test]"
```

## 3. 設定

- **環境変数:** FastAPIやStreamlit、LLMの接続情報などの設定は、プロジェクトルートの`.env`ファイルで行うことができます。（例: `OLLAMA_BASE_URL`など）
- **RAG戦略:** 各RAG戦略や埋め込みモデルなどの設定は、`config/strategies.yaml` ファイルで管理されています。詳細はこのファイルを参照してください。

## 4. 実行方法

バックエンドAPIとフロントエンドUIは、それぞれ個別に起動する必要があります。

### 4.1. バックエンドAPIの起動

```bash
# 仮想環境が有効な状態で実行
uvicorn backend.main:app --reload --port 8000
```
APIサーバーが `http://localhost:8000` で起動します。

### 4.2. フロントエンドUIの起動

```bash
# 仮想環境が有効な状態で実行
streamlit run frontend/app.py
```
Webインターフェースが `http://localhost:8501` で起動します。ブラウザでこのアドレスにアクセスしてください。

## 5. テストの実行

プロジェクト全体のテストスイートを実行するには、以下のコマンドを使用します。

```bash
pytest
```

テストのアーキテクチャやモッキング戦略に関する詳細な情報は、以下のドキュメントを参照してください。
- [テスト戦略とモック活用ガイド](./03_Testing_Strategy_and_Mocking.md)
